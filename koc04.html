<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catlink Tag System Heatmap Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
  padding: 20px;
}

.container {
            max-width: 1200px;
    margin: 0 auto;
}

        .header {
            background: white;
            padding: 20px;
  border-radius: 8px;
  margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #333;
            margin-bottom: 10px;
}

.tabs {
  display: flex;
            gap: 10px;
  margin-bottom: 20px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.tab {
            padding: 10px 20px;
            border: none;
            background: #f0f0f0;
            border-radius: 4px;
  cursor: pointer;
            font-size: 16px;
}

.tab.active {
            background: #0066cc;
            color: white;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            height: 600px;
        }

        .insights {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .insight-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .insight-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .insight-card ul {
            list-style: none;
        }

        .insight-card li {
            margin-bottom: 8px;
            padding-left: 15px;
            position: relative;
            font-size: 14px;
            line-height: 1.4;
        }

        .insight-card li:before {
            content: "•";
            position: absolute;
            left: 0;
            color: #0066cc;
        }

        .sankey-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            height: 500px;
        }

        .section-title {
            color: #333;
            margin: 30px 0 20px;
            text-align: center;
            font-size: 24px;
        }

        .journey-insights {
            background: white;
            padding: 20px;
    border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .journey-insights h3 {
            color: #0066cc;
    margin-bottom: 15px;
        }

        .journey-insights p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .journey-recommendations {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .recommendation-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #0066cc;
        }

        .recommendation-card h4 {
            color: #0066cc;
            margin-bottom: 10px;
        }
</style>
</head>
<body>
<div class="container">
        <div class="header">
            <h1>Catlink Tag System User Journey Heatmap Analysis</h1>
    </div>

    <div class="tabs">
            <button class="tab active" data-tab="user">User Tags</button>
            <button class="tab" data-tab="product">Product Tags</button>
            <button class="tab" data-tab="channel">Channel Tags</button>
    </div>

        <div class="chart-container" id="heatmap"></div>

        <div class="insights">
            <div class="insight-card">
                <h3>High Impact Tags</h3>
                <ul>
                    <li>Multiple Cat Household (Awareness Stage)</li>
                    <li>Auto-Clean (Full Cycle)</li>
                    <li>Dual-Income Households (Purchase Decision)</li>
                    <li>High-End Users (Repurchase Rate)</li>
                </ul>
            </div>
            <div class="insight-card">
                <h3>Key Conversion Points</h3>
                <ul>
                    <li>Smart Monitoring → Purchase Conversion</li>
                    <li>Safety Protection → Repurchase Guarantee</li>
                    <li>Material Quality → Word of Mouth</li>
                    <li>Fashion Minimalist → Interest Cultivation</li>
                </ul>
             </div>
            <div class="insight-card">
                <h3>Optimization Suggestions</h3>
                <ul>
                    <li>Strengthen Multiple Cat Scenario Content</li>
                    <li>Highlight Smart Feature Advantages</li>
                    <li>Deepen High-End User Operations</li>
                    <li>Improve After-Sales Service System</li>
               </ul>
            </div>
        </div>

        <h2 class="section-title">User Journey Flow Analysis</h2>
        <div class="sankey-container" id="sankey"></div>
        
        <div class="journey-insights">
            <h3>Journey Flow Insights</h3>
            <p>The user journey analysis reveals several key patterns in the conversion funnel:</p>
            <ul>
                <li>Strong initial awareness among multiple-cat households (90%) with high interest conversion (95%)</li>
                <li>Significant drop-off between interest and purchase stages for budget users (65% → 60%)</li>
                <li>High retention rate for high-end users throughout the journey (80-90% across stages)</li>
                <li>Social platforms drive strong awareness but show lower purchase conversion</li>
            </ul>
            
            <div class="journey-recommendations">
                <div class="recommendation-card">
                    <h4>Awareness Stage Optimization</h4>
                    <ul>
                        <li>Expand TikTok content strategy for broader reach</li>
                        <li>Focus on multiple-cat household scenarios</li>
                        <li>Enhance brand visibility on Amazon platform</li>
                    </ul>
            </div>
                <div class="recommendation-card">
                    <h4>Interest to Purchase Conversion</h4>
                    <ul>
                        <li>Strengthen product education content</li>
                        <li>Implement targeted promotions for hesitant segments</li>
                        <li>Optimize e-commerce landing pages</li>
                    </ul>
             </div>
                <div class="recommendation-card">
                    <h4>Purchase Decision Support</h4>
                    <ul>
                        <li>Highlight safety features for new customers</li>
                        <li>Develop competitive pricing strategies</li>
                        <li>Enhance product comparison tools</li>
                 </ul>
              </div>
                <div class="recommendation-card">
                    <h4>Retention Strategy</h4>
                    <ul>
                        <li>Implement loyalty program for high-end users</li>
                        <li>Develop after-sales content series</li>
                        <li>Create community engagement programs</li>
                    </ul>
    </div>
           </div>
        </div>
    </div>

<script>
        // Data definitions
const userSegments = [
    {
      category: "Pet Owner Type",
      tags: [
        { name: "Single Cat Household", awareness: 75, interest: 85, purchase: 80, repurchase: 70 },
        { name: "Multiple Cat Household", awareness: 90, interest: 95, purchase: 85, repurchase: 80 },
        { name: "Special Cat Breeds", awareness: 70, interest: 80, purchase: 75, repurchase: 65 }
      ]
    },
    {
      category: "Living Situation",
      tags: [
        { name: "Small Apartment", awareness: 85, interest: 90, purchase: 75, repurchase: 70 },
        { name: "Large Apartment", awareness: 70, interest: 75, purchase: 80, repurchase: 85 },
        { name: "Dual-Income Households", awareness: 95, interest: 90, purchase: 85, repurchase: 80 }
      ]
    },
    {
      category: "Purchasing Power",
      tags: [
        { name: "High-End Users", awareness: 80, interest: 90, purchase: 85, repurchase: 90 },
        { name: "Mid-Tier Users", awareness: 85, interest: 80, purchase: 75, repurchase: 70 },
        { name: "Budget Users", awareness: 70, interest: 65, purchase: 60, repurchase: 55 }
      ]
    }
];

const productFeatures = [
    {
        category: "Core Features",
        tags: [
            { name: "Auto-Clean", awareness: 95, interest: 90, purchase: 85, repurchase: 80 },
            { name: "Smart Monitoring", awareness: 85, interest: 90, purchase: 80, repurchase: 85 },
            { name: "Odor Removal System", awareness: 90, interest: 85, purchase: 80, repurchase: 75 }
        ]
    },
    {
        category: "User Experience",
        tags: [
            { name: "Quiet Design", awareness: 80, interest: 85, purchase: 90, repurchase: 85 },
            { name: "Easy to Clean", awareness: 85, interest: 90, purchase: 85, repurchase: 80 },
            { name: "Safety Protection", awareness: 75, interest: 85, purchase: 90, repurchase: 85 }
        ]
    },
    {
        category: "Appearance Design",
        tags: [
            { name: "Fashion Minimalist", awareness: 90, interest: 85, purchase: 75, repurchase: 70 },
            { name: "Space Adaptability", awareness: 85, interest: 80, purchase: 85, repurchase: 80 },
            { name: "Material Quality", awareness: 80, interest: 85, purchase: 90, repurchase: 85 }
        ]
    }
];

const channelFeatures = [
    {
        category: "Social Platforms",
        tags: [
            { name: "Instagram", awareness: 90, interest: 85, purchase: 70, repurchase: 65 },
            { name: "TikTok", awareness: 95, interest: 90, purchase: 75, repurchase: 70 },
            { name: "YouTube", awareness: 85, interest: 90, purchase: 80, repurchase: 75 }
        ]
    },
    {
        category: "E-Commerce Platforms",
        tags: [
            { name: "Amazon", awareness: 80, interest: 85, purchase: 90, repurchase: 85 },
            { name: "Official Website", awareness: 75, interest: 80, purchase: 85, repurchase: 90 },
            { name: "Other E-Commerce", awareness: 70, interest: 75, purchase: 80, repurchase: 75 }
        ]
    }
];

        // Initialize ECharts
        const chart = echarts.init(document.getElementById('heatmap'));

        // Function to transform data for heatmap
        function transformDataForHeatmap(data) {
            const stages = ['Awareness', 'Interest', 'Purchase', 'Repurchase'];
            const yLabels = [];
            const values = [];

     data.forEach(segment => {
                yLabels.push({ 
                    value: segment.category,
                    textStyle: { 
                        fontSize: 14,
                        fontWeight: 'bold'
                    }
                });
        segment.tags.forEach(tag => {
                    yLabels.push(tag.name);
                    values.push(
                        [0, yLabels.length - 1, tag.awareness],
                        [1, yLabels.length - 1, tag.interest],
                        [2, yLabels.length - 1, tag.purchase],
                        [3, yLabels.length - 1, tag.repurchase]
                    );
                });
            });

            return {
                yLabels,
                stages,
                values
            };
        }

        // Function to update chart
        function updateChart(dataSet) {
            const { yLabels, stages, values } = transformDataForHeatmap(dataSet);

            const option = {
                tooltip: {
                    position: 'top',
                    formatter: function (params) {
                        return `${yLabels[params.value[1]].value || yLabels[params.value[1]]}<br>${stages[params.value[0]]}: ${params.value[2]}%`;
                    }
                },
                grid: {
                    top: '50',
                    right: '60',
                    bottom: '60',
                    left: '200'
                },
                xAxis: {
                    type: 'category',
                    data: stages,
                    splitArea: {
                        show: true
                    }
                },
                yAxis: {
                    type: 'category',
                    data: yLabels,
                    splitArea: {
                        show: true
                    }
                },
                visualMap: {
                    min: 50,
                    max: 100,
                    calculable: true,
                    orient: 'horizontal',
                    left: 'center',
                    bottom: '0',
                    inRange: {
                        color: ['#f7c4c4', '#ff4d4f']
                    }
                },
                series: [{
                    name: 'Score',
                    type: 'heatmap',
                    data: values,
                    label: {
                        show: true,
                        formatter: function(params) {
                            return params.value[2] + '%';
                        }
                    },
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }]
            };

            chart.setOption(option);
        }

        // Initial chart render
        updateChart(userSegments);

// Tab switching logic
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Update active tab
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');

                // Update chart based on selected tab
                const tabName = this.getAttribute('data-tab');
                switch(tabName) {
                    case 'user':
                        updateChart(userSegments);
                        break;
                    case 'product':
                        updateChart(productFeatures);
                        break;
                    case 'channel':
                        updateChart(channelFeatures);
                        break;
             }
         });
     });

        // Handle window resize
        window.addEventListener('resize', function() {
            chart.resize();
        });

        // 添加桑基图数据
        const sankeyData = {
            nodes: [
                // Awareness Stage
                { name: 'Social Media' },
                { name: 'Search' },
                { name: 'Referral' },
                // Interest Stage
                { name: 'Product Pages' },
                { name: 'Content Engagement' },
                { name: 'Comparison Tools' },
                // Purchase Stage
                { name: 'E-commerce' },
                { name: 'Official Store' },
                // Repurchase Stage
                { name: 'Loyal Customers' },
                { name: 'Occasional Buyers' }
            ],
            links: [
                // Awareness to Interest
                { source: 0, target: 3, value: 50 },
                { source: 0, target: 4, value: 30 },
                { source: 1, target: 3, value: 40 },
                { source: 1, target: 5, value: 25 },
                { source: 2, target: 4, value: 20 },
                { source: 2, target: 5, value: 15 },
                // Interest to Purchase
                { source: 3, target: 6, value: 45 },
                { source: 3, target: 7, value: 35 },
                { source: 4, target: 6, value: 25 },
                { source: 4, target: 7, value: 20 },
                { source: 5, target: 6, value: 20 },
                { source: 5, target: 7, value: 15 },
                // Purchase to Repurchase
                { source: 6, target: 8, value: 40 },
                { source: 6, target: 9, value: 30 },
                { source: 7, target: 8, value: 35 },
                { source: 7, target: 9, value: 20 }
            ]
        };

        // 创建桑基图
        const sankeyChart = echarts.init(document.getElementById('sankey'));
        
        const sankeyOption = {
         title: {
                text: 'User Journey Flow',
            left: 'center'
        },
        tooltip: {
                trigger: 'item',
                triggerOn: 'mousemove'
            },
            series: [{
                type: 'sankey',
                data: sankeyData.nodes,
                links: sankeyData.links,
                emphasis: {
                    focus: 'adjacency'
                },
                levels: [{
                    depth: 0,
                    itemStyle: {
                        color: '#fbb4ae'
                    },
                    lineStyle: {
                        color: 'source',
                        opacity: 0.6
                    }
                }, {
                    depth: 1,
                    itemStyle: {
                        color: '#b3cde3'
                    }
                }, {
                    depth: 2,
                    itemStyle: {
                        color: '#ccebc5'
                    }
                }, {
                    depth: 3,
                    itemStyle: {
                        color: '#decbe4'
                    }
                }],
                lineStyle: {
                    curveness: 0.5
                }
            }]
        };

        sankeyChart.setOption(sankeyOption);

        // 处理窗口大小变化
        window.addEventListener('resize', function() {
            chart.resize();
            sankeyChart.resize();
        });
</script>
</body>
</html>
