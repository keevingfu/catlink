<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catlink DTC Daily Traffic Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
        }

        .container {
            width: 95%;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        h2 {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        h3 {
          font-size: 1.1em;
          font-weight: bold;
          margin-top: 0.75rem;
          margin-bottom: 0.25rem;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Default: 2 columns */
            gap: 20px;
            margin-bottom: 20px;
        }
        .grid-container-kpi {
            grid-template-columns: repeat(4, 1fr); /* For the KPI row, use 4 */
        }

        .card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background-color: #fff;
        }

        .card-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #444;
            margin-bottom: 10px;
        }

        .metric-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #222;
        }
        .metric-label {
            font-size: 0.9em;
            color: #666;
        }


        .chart-container {
            width: 100%;
            height: 350px; /* Increased height */
        }

        .insights {
            margin-top: 1rem;
        }
        .insights p, .insights ul {
            margin-bottom: 0.5rem;
        }

        .insights-bold {
            font-weight: bold;
        }
        .insights ul {
            list-style-type: disc;
            margin-left: 1.5rem;
        }

    </style>
</head>
<body>

<div class="container">
    <h1>Catlink DTC Daily Traffic Analysis</h1>

   
    <div class="grid-container grid-container-kpi">
        <div class="card">
            <div class="card-title">Average Daily Traffic</div>
            <div class="metric-value">900</div>
        </div>
        <div class="card">
            <div class="card-title">Peak Traffic Day</div>
            <div class="metric-value">1,195</div>
            <div class="metric-label">Jan 21, 2025</div>
        </div>
        <div class="card">
            <div class="card-title">Lowest Traffic Day</div>
            <div class="metric-value">687</div>
            <div class="metric-label">Feb 12, 2025</div>
        </div>
        <div class="card">
            <div class="card-title">Total Sessions</div>
            <div class="metric-value">38,686</div>
        </div>
    </div>

    
     <div class="card">
      <div class="card-title">Daily Traffic Trend</div>
      <div class="chart-container" id="trafficTrendChart"></div>
       <div class="insights">
                <h3 class="insights-bold">Overall Trend</h3>
                <p>The daily traffic shows a gradual declining trend from January to February, with the first half of January maintaining consistently higher traffic levels compared to February.</p>

                <h3 class="insights-bold">Key Observations</h3>
                <ul>
                    <li>Highest traffic peak on January 21st with 1,195 sessions</li>
                    <li>January 5-6 showed strong performance with over 1,000 daily sessions</li>
                    <li>Notable decline in traffic after January 26th</li>
                    <li>February shows consistently lower traffic, averaging below 800 sessions</li>
                </ul>

                 <h3 class="insights-bold">Traffic Patterns</h3>
                <ul>
                  <li>Early January (1st-7th): Average 982 sessions/day</li>
                  <li>Mid January (14th-21st): Peak period with highest traffic</li>
                  <li>Late January (22nd-31st): Gradual decline to ~800 sessions</li>
                  <li>February: Consistent lower traffic around 750-800 sessions</li>
                </ul>

                <h3 class="insights-bold">Recommendations</h3>
                <ul>
                    <li>Investigate successful traffic drivers from January 21st peak day.</li>
                    <li>Analyze the factors contributing to early January's strong performance.</li>
                    <li>Implement strategies to reverse the February decline trend.</li>
                    <li>Consider special promotions or campaigns to boost February traffic.</li>
                </ul>
            </div>
    </div>
</div>


<script>
    // --- ECharts Initialization ---

  // Traffic Trend Chart (Line Chart)
function initTrafficTrendChart() {
  const trafficTrendChart = echarts.init(document.getElementById('trafficTrendChart'));
  const data = [
    {date: '1/1/2025', sessions: 897},
    {date: '1/2/2025', sessions: 936},
    {date: '1/3/2025', sessions: 995},
    {date: '1/4/2025', sessions: 951},
    {date: '1/5/2025', sessions: 1104},
    {date: '1/6/2025', sessions: 1069},
    {date: '1/7/2025', sessions: 924},
    {date: '1/8/2025', sessions: 902},
    {date: '1/9/2025', sessions: 980},
    {date: '1/10/2025', sessions: 896},
    {date: '1/11/2025', sessions: 924},
    {date: '1/12/2025', sessions: 1035},
    {date: '1/13/2025', sessions: 976},
    {date: '1/14/2025', sessions: 1001},
    {date: '1/15/2025', sessions: 901},
    {date: '1/16/2025', sessions: 883},
    {date: '1/17/2025', sessions: 984},
    {date: '1/18/2025', sessions: 889},
    {date: '1/19/2025', sessions: 944},
    {date: '1/20/2025', sessions: 917},
    {date: '1/21/2025', sessions: 1195},
    {date: '1/22/2025', sessions: 1024},
    {date: '1/23/2025', sessions: 1077},
    {date: '1/24/2025', sessions: 913},
    {date: '1/25/2025', sessions: 946},
    {date: '1/26/2025', sessions: 953},
    {date: '1/27/2025', sessions: 798},
    {date: '1/28/2025', sessions: 784},
    {date: '1/29/2025', sessions: 834},
    {date: '1/30/2025', sessions: 801},
    {date: '1/31/2025', sessions: 844},
    {date: '2/1/2025', sessions: 804},
    {date: '2/2/2025', sessions: 864},
    {date: '2/3/2025', sessions: 766},
    {date: '2/4/2025', sessions: 853},
    {date: '2/5/2025', sessions: 813},
    {date: '2/6/2025', sessions: 826},
    {date: '2/7/2025', sessions: 760},
    {date: '2/8/2025', sessions: 724},
    {date: '2/9/2025', sessions: 767},
    {date: '2/10/2025', sessions: 770},
    {date: '2/11/2025', sessions: 775},
    {date: '2/12/2025', sessions: 687}
  ];

    // Calculate 7-day moving average
    const movingAverage = data.map((item, index) => {
      const start = Math.max(0, index - 6);
      const subset = data.slice(start, index + 1);
      const avg = Math.round(subset.reduce((sum, curr) => sum + curr.sessions, 0) / subset.length);
      return {
        ...item,
        movingAvg: avg
      };
    });

  const trafficTrendOption = {
    tooltip: {
      trigger: 'axis'
    },
    legend: {
      data: ['Daily Sessions', '7-Day Average'],
      bottom: 0
    },
    xAxis: {
      type: 'category',
      data: movingAverage.map(item => item.date),
      axisLabel: {
        rotate: -45,
        interval: 2, // Show every 3rd label
        fontSize: 12
      }
    },
    yAxis: {
      type: 'value',
      min: function(value) { return value.min - 100 > 0 ? value.min - 100 : 0 }, //Handle potential negative values after subtraction.
      max: function(value) { return value.max + 100; }
    },
    series: [
      {
        name: 'Daily Sessions',
        type: 'line',
        data: movingAverage.map(item => item.sessions),
        color: '#8884d8',
        smooth: true, // Add smooth lines
        showSymbol: false, // Remove data points
      },
      {
        name: '7-Day Average',
        type: 'line',
        data: movingAverage.map(item => item.movingAvg),
        color: '#82ca9d',
        smooth: true,
        showSymbol: false,
        lineStyle: {  //Style the moving average line.
            width: 2
        }
      }
    ]
  };
  trafficTrendChart.setOption(trafficTrendOption);
}


// Initial chart setup
initTrafficTrendChart();

// Handle window resize
window.addEventListener('resize', () => {
    echarts.getInstanceByDom(document.getElementById('trafficTrendChart'))?.resize();
});

</script>
</body>
</html>